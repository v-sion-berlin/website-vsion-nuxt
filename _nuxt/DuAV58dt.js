const h={trailing:!0};function T(a,i=25,t={}){if(t={...h,...t},!Number.isFinite(i))throw new TypeError("Expected `wait` to be a finite number");let f,n,u=[],r,l;const o=(e,s)=>(r=y(a,e,s),r.finally(()=>{if(r=null,t.trailing&&l&&!n){const d=o(e,l);return l=null,d}}),r),c=function(...e){return t.trailing&&(l=e),r||new Promise(s=>{const d=!n&&t.leading;clearTimeout(n),n=setTimeout(()=>{n=null;const g=t.leading?f:o(this,e);l=null;for(const p of u)p(g);u=[]},i),d?(f=o(this,e),s(f)):u.push(s)})},m=e=>{e&&(clearTimeout(e),n=null)};return c.isPending=()=>!!n,c.cancel=()=>{m(n),u=[],l=null},c.flush=()=>{if(m(n),!l||r)return;const e=l;return l=null,o(this,e)},c}async function y(a,i,t){return await a.apply(i,t)}export{T as d};
